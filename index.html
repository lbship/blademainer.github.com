<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="blademainer"><link rel="icon" href="/hexo.png"><title>blademainer</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="blademainer" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/css/highlight.css"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">blademainer</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/archives">Archive</a></li><li><a href="https://github.com/blademainer/blademainer.github.com">Github</a></li><li><a href="/about/">About</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/hexo.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img='3' data-img-src-1="/bigimgs/01.jpg" data-img-desc-1="beautiful island" data-img-src-2="/bigimgs/02.jpg" data-img-desc-2="Tropical Fish" data-img-src-3="/bigimgs/03.jpg" data-img-desc-3="ocean"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>Blademainer</h1><hr class="small"><span class="page-subheading">Just do it!</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/2017/04/06/2017-04-06-run-java-in-docker/"><h2 class="post-title">在docker内运行java的问题</h2></a><p class="post-meta">Posted on Apr 6 2017 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/docker/" class="tag post-meta">docker</a></p><div class="post-entry"><blockquote>
<p>众所周知，当我们执行没有任何调优参数（如<code>java -jar myapplication.jar</code>）的 Java 应用程序时，JVM 会自动调整几个参数，以便在执行环境中具有最佳性能。但是许多开发者发现，如果让 JVM ergonomics (即JVM人体工程学，用于自动选择和行为调整)对垃圾收集器、堆大小和运行编译器使用默认设置值，运行在Linux容器（docker,rkt,runC,lxcfs 等）中的 Java 进程会与我们的预期表现严重不符。</p>
</blockquote>
<p>本篇文章采用简单的方法来向开发人员展示在 Linux 容器中打包 Java 应用程序时应该知道什么。</p></div><a href="/2017/04/06/2017-04-06-run-java-in-docker/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2017/03/23/run-docker-in-docker/"><h2 class="post-title">在docker内运行docker命令</h2></a><p class="post-meta">Posted on Mar 23 2017 · <a href="/tags/docker/" class="tag post-meta">docker</a> · <a href="/tags/docker-in-docker/" class="tag post-meta">docker in docker</a> · <a href="/tags/jenkins/" class="tag post-meta">jenkins</a></p><div class="post-entry"></div><a href="/2017/03/23/run-docker-in-docker/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2017/03/14/bash-shortcuts/"><h2 class="post-title">bash快捷键</h2></a><p class="post-meta">Posted on Mar 14 2017 · <a href="/tags/bash/" class="tag post-meta">bash</a> · <a href="/tags/shortcuts/" class="tag post-meta">shortcuts</a> · <a href="/tags/快捷键/" class="tag post-meta">快捷键</a></p><div class="post-entry"><p>Linux 终端常用快捷键</p></div><a href="/2017/03/14/bash-shortcuts/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2017/02/17/2017-02-17-openjdk-read-note/"><h2 class="post-title">openjdk阅读笔记</h2></a><p class="post-meta">Posted on Feb 17 2017 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/openjdk/" class="tag post-meta">openjdk</a> · <a href="/tags/hotspot/" class="tag post-meta">hotspot</a></p><div class="post-entry"></div><a href="/2017/02/17/2017-02-17-openjdk-read-note/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2017/02/14/ali-java-specification/"><h2 class="post-title">阿里巴巴Java开发手册</h2></a><p class="post-meta">Posted on Feb 14 2017 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/specification/" class="tag post-meta">specification</a> · <a href="/tags/ali/" class="tag post-meta">ali</a></p><div class="post-entry"><hr>
<ul>
<li><a href="#一-编程规约">一 编程规约</a><ul>
<li><a href="#一-命名规约">(一) 命名规约</a></li>
<li><a href="#二-常量定义">(二) 常量定义</a></li>
<li><a href="#三-格式规约">(三) 格式规约</a></li>
<li><a href="#四-OOP规约">(四) OOP规约</a></li>
<li><a href="#五-集合处理">(五) 集合处理</a></li>
<li><a href="#六-并发处理">(六) 并发处理</a></li>
<li><a href="#七-控制语句">(七) 控制语句</a></li>
<li><a href="#八-注释规约">(八) 注释规约</a></li>
<li><a href="#九-其它">(九) 其它</a></li>
</ul>
</li>
<li><a href="#二-异常日志">二 异常日志</a><ul>
<li><a href="#一-异常处理">(一) 异常处理</a></li>
<li><a href="#二-日志规约">(二) 日志规约</a></li>
</ul>
</li>
<li><a href="#三-MySQL规约">三 MySQL规约</a><ul>
<li><a href="#一-建表规约">(一) 建表规约</a></li>
<li><a href="#二-索引规约">(二) 索引规约</a></li>
<li><a href="#三-SQL规约">(三) SQL规约</a></li>
<li><a href="#四-ORM规约">(四) ORM规约</a></li>
</ul>
</li>
<li><a href="#四-工程规约">四 工程规约</a><ul>
<li><a href="#一-应用分层">(一) 应用分层</a></li>
<li><a href="#二-二方库规约">(二) 二方库规约</a></li>
<li><a href="#三-服务器规约">(三) 服务器规约</a></li>
</ul>
</li>
<li><a href="#五-安全规约">五 安全规约</a></li>
</ul>
<hr></div><a href="/2017/02/14/ali-java-specification/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2016/12/18/2016-12-19-maven-notes/"><h2 class="post-title">maven记事本</h2></a><p class="post-meta">Posted on Dec 18 2016 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/maven/" class="tag post-meta">maven</a></p><div class="post-entry"></div><a href="/2016/12/18/2016-12-19-maven-notes/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2016/11/14/2016-11-14-tools-download-url/"><h2 class="post-title">java开发者常用软件下载地址收集</h2></a><p class="post-meta">Posted on Nov 14 2016 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/tool/" class="tag post-meta">tool</a> · <a href="/tags/download/" class="tag post-meta">download</a></p><div class="post-entry"><p>这里收藏工作中用到的下载地址，也为了防止做重复的搜索工作，同时分享给大家。<br></div><a href="/2016/11/14/2016-11-14-tools-download-url/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2016/09/12/shell-notes/"><h2 class="post-title">shell脚本命令备忘</h2></a><p class="post-meta">Posted on Sep 12 2016 · <a href="/tags/shell/" class="tag post-meta">shell</a> · <a href="/tags/vim/" class="tag post-meta">vim</a></p><div class="post-entry"><p>这里收藏工作中用到的脚本，也为了防止做重复的搜索工作，同时分享给大家。<br></div><a href="/2016/09/12/shell-notes/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2016/04/18/java-multiple-segment-lock/"><h2 class="post-title">java分段锁示例</h2></a><p class="post-meta">Posted on Apr 18 2016 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/spring/" class="tag post-meta">spring</a> · <a href="/tags/segment/" class="tag post-meta">segment</a> · <a href="/tags/lock/" class="tag post-meta">lock</a> · <a href="/tags/ReentrantLock/" class="tag post-meta">ReentrantLock</a> · <a href="/tags/锁/" class="tag post-meta">锁</a> · <a href="/tags/分段锁/" class="tag post-meta">分段锁</a></p><div class="post-entry"><h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p>读ConcurrentHashMap的时候，我们遇到的一个很大的概念就是<code>Segment</code>（java8之后只有在调用writeObject方法的方法的时候才会用到segment），该类继承了<code>ReentrantLock</code>，用于实现分段锁（乐观锁）。处于心痒痒的目的，我也尝试写了个简陋版的分段锁。</p>
<h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><p>该Demo实现的比较简单：根据key获取或者创建Lock（获取锁的时候使用<code>double check</code>），然后使用该锁来同步put或者read（ConcurrentHashMap的读操作使用的volatile，这里不深入）。不足之处还请指正~</p>
<h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>java实现： <a href="https://github.com/blademainer/java-demo/blob/master/src/main/java/com/xiongyingqi/concurrent/MultipleSegmentLock.java" target="_blank" rel="external">github</a></p></div><a href="/2016/04/18/java-multiple-segment-lock/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/2016/03/29/jackson-deserialize-collection/"><h2 class="post-title">Jackson解析json为指定泛型的集合</h2></a><p class="post-meta">Posted on Mar 29 2016 · <a href="/tags/java/" class="tag post-meta">java</a> · <a href="/tags/jackson/" class="tag post-meta">jackson</a> · <a href="/tags/fasterxml/" class="tag post-meta">fasterxml</a> · <a href="/tags/collection/" class="tag post-meta">collection</a> · <a href="/tags/deserialize/" class="tag post-meta">deserialize</a></p><div class="post-entry"><h1 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h1><p>在日常开发中，当使用ObjectMapper进行解析json时，我们时常需要将json解析成我们指定泛型的集合类型<code>Collection&lt;type&gt;</code>。<br>但是如果直接使用<code>objectMapper.readValue(json, Collection.class)</code>的话，那么就会解析为<code>Collection&lt;Map&gt;</code>的类型，这个明显不是我们想要的。  </p>
<h1 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h1><p>在jackson内，如果要反序列化为Collection或者Map，我们可以使用  </p>
<ul>
<li><code>CollectionType construct = CollectionType.construct(LinkedList.class, SimpleType.construct(clazz));</code> </li>
<li><code>MapType construct = MapType.construct(HashMap.class, SimpleType.construct(keyType), SimpleType.construct(valueType))</code></li>
</ul></div><a href="/2016/03/29/jackson-deserialize-collection/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="next"><a href="/page/2">Older Posts →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/blademainer" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="/atom.xml" title="RSS"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-rss"></i></span></a></li><li><a href="mailto:blademainer@gmail.com" title="Email me"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-envelope"></i></span></a></li><li><a href="https://www.zhihu.com/people/xiong-ying-qi" title="ZhiHu"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-link"></i></span></a></li></ul><p class="copyright text-muted">© blademainer • 2017 • <a href="mailto:undefined"></a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?401b87cd7ccfbae7934d36a06c2bb321";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script></body></html>